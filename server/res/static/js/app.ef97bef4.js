(function(t){function e(e){for(var n,i,o=e[0],u=e[1],c=e[2],l=0,d=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);h&&h(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,i=1;i<r.length;i++){var o=r[i];0!==a[o]&&(n=!1)}n&&(s.splice(e--,1),t=u(u.s=r[0]))}return t}var n={},i={app:0},a={app:0},s=[];function o(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-2bbd41e0":"d5967183","chunk-2d21044b":"8ded28ac","chunk-70ddf470":"7e642acf","chunk-735b5cf5":"5c746ec5","chunk-76e9448e":"53915dd8"}[t]+".js"}function u(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(t){var e=[],r={"chunk-2bbd41e0":1,"chunk-70ddf470":1,"chunk-735b5cf5":1,"chunk-76e9448e":1};i[t]?e.push(i[t]):0!==i[t]&&r[t]&&e.push(i[t]=new Promise((function(e,r){for(var n="css/"+({}[t]||t)+"."+{"chunk-2bbd41e0":"310897a3","chunk-2d21044b":"31d6cfe0","chunk-70ddf470":"02a2ed41","chunk-735b5cf5":"59598661","chunk-76e9448e":"24d8b337"}[t]+".css",a=u.p+n,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===a))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],l=c.getAttribute("data-href");if(l===n||l===a)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var n=e&&e.target&&e.target.src||a,s=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete i[t],h.parentNode.removeChild(h),r(s)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){i[t]=0})));var n=a[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,r){n=a[t]=[e,r]}));e.push(n[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(t);var d=new Error;c=function(e){l.onerror=l.onload=null,clearTimeout(h);var r=a[t];if(0!==r){if(r){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",d.name="ChunkLoadError",d.type=n,d.request=i,r[1](d)}a[t]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(e)},u.m=t,u.c=n,u.d=function(t,e,r){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)u.d(r,n,function(e){return t[e]}.bind(null,n));return r},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var h=l;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"08c1":function(t,e,r){},"09bb":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a}));var n=r("bc3a"),i=function(t){var e=t.username,r=t.password;return console.log(e,r),n.request({url:"/api/login",params:{username:e,password:r},method:"post"})},a=function(t){var e=t.keywords;return n.request({url:"/api/search",params:{keywords:e},method:"get"})}},"32e5":function(t,e,r){},"3b07":function(t,e,r){"use strict";r("8a51")},"3f5a":function(t,e,r){"use strict";r("7613")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n,i,a=r("2b0e"),s=function(){var t=this,e=this,r=e.$createElement,n=e._self._c||r;return n("div",{attrs:{id:"app"},on:{click:e.handleAppClick}},[n("div",{ref:"bg",style:{"background-image":e.blur_bg},attrs:{id:"bg"}}),n("div",{attrs:{id:"main"}},[n("div",{attrs:{id:"top-bar"}},[e._m(0),n("div",{attrs:{id:"nav"}},[n("div",{attrs:{id:"search-container"}},[n("form",{attrs:{id:"search-form",onsubmit:"return false",autocomplete:"off"}},[n("input",{ref:"searchValue",attrs:{type:"text",name:"search"}}),n("i",{staticClass:"iconfont icon-search"},[n("input",{attrs:{type:"submit",value:""},on:{click:e.handleSearch}})])])]),n("div",{attrs:{id:"avatar-container"}},[1==this.$store.getters.getLoginState?n("user-avatar",{on:{click:function(r){t.$store.dispatch("showRightBar"),t.$store.dispatch("hidePlayList"),e.right_container_view="user",r.stopPropagation()}}}):n("span",{on:{click:function(r){t.$store.dispatch("showRightBar"),t.$store.dispatch("hidePlayList"),e.right_container_view="login",r.stopPropagation()}}},[e._v("请登录")])],1)])]),n("router-view"),n("transition",{attrs:{name:"right_bar_visibility"}},[this.$store.getters.getRightBarVisibility?n("div",{attrs:{id:"right-bar"},on:{click:function(t){return e.handleRightBarClick()}}},[n(e.right_container_view,{tag:"component"})],1):e._e()])],1)])},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"logo"}},[r("span",[t._v("tdoca-music")])])}],u=(r("b0c0"),r("d3b7"),r("5530")),c=r("cbd5"),l=r.n(c),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"user-avatar",attrs:{id:"user-avatar"}})},h=[],f={name:"user-avatar",data:function(){return{}},mounted:function(){console.log(this.$refs["user-avatar"]),this.$refs["user-avatar"].style["background-image"]="url(http://localhost:8888/api/getAvatarByUser)"}},m=f,p=(r("c1a8"),r("2877")),v=Object(p["a"])(m,d,h,!1,null,"0f7079ba",null),g=v.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"user"}},[r("div",{attrs:{id:"user-info-container"}},[r("div",{attrs:{id:"user-avatar-container"}},[r("user-avatar")],1),r("div",{attrs:{id:"user-name-container"}},[r("user-name")],1),r("div",{attrs:{id:"user-introduce-container"}},[r("user-introduce")],1)]),r("div",{attrs:{id:"user-data-container"}},[r("user-data")],1),t._m(0)])},y=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"user-option-container"}},[r("div",{staticClass:"user-option-item"},[r("span",[r("i",{staticClass:"iconfont icon-set"}),t._v("编辑用户信息")])]),r("div",{staticClass:"user-option-item"},[r("span",[r("i",{staticClass:"iconfont icon-switch"}),t._v("退出登录")])])])}],_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"user-data"}},[r("router-link",{staticClass:"user-data-item",attrs:{to:"/my/news"}},[r("span",{staticClass:"user-data-item-value"},[t._v("0")]),r("span",{staticClass:"user-data-item-key"},[t._v("动态")])]),r("router-link",{staticClass:"user-data-item",attrs:{to:""}},[r("span",{staticClass:"user-data-item-value"},[t._v("0")]),r("span",{staticClass:"user-data-item-key"},[t._v("收藏")])]),r("router-link",{staticClass:"user-data-item",attrs:{to:""}},[r("span",{staticClass:"user-data-item-value"},[t._v("0")]),r("span",{staticClass:"user-data-item-key"},[t._v("关注")])])],1)},w=[],k={name:"user-data"},x=k,C=(r("c772"),Object(p["a"])(x,_,w,!1,null,"8f40815c",null)),$=C.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{attrs:{id:"user-name"}},[t._v("tdoca")])},j=[],L={name:"user-name"},P=L,S=(r("3f5a"),Object(p["a"])(P,O,j,!1,null,"e86e0f00",null)),M=S.exports,E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"user-introduce"}},[t._v("this is tdoca-music test side 这里是tdoca-music测试站点")])},I=[],A={name:"user-introduce"},B=A,R=(r("ebfe"),Object(p["a"])(B,E,I,!1,null,"e30f1364",null)),V=R.exports,N={name:"user",components:{userData:$,userName:M,userAvatar:g,userIntroduce:V}},T=N,K=(r("f5ae"),Object(p["a"])(T,b,y,!1,null,null,null)),D=K.exports,q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{attrs:{id:"login",onsubmit:"return false",autocomplete:"off"}},[r("div",{attrs:{id:"login-form-container"}},[r("span",{attrs:{id:"login-form-title"}},[t._v("Login")]),r("span",{attrs:{id:"username-container"}},[t._v("username:"),r("input",{ref:"username",attrs:{type:"text",name:"username",id:"username"}})]),r("span",{attrs:{id:"password-container"}},[t._v("password:"),r("input",{ref:"password",attrs:{type:"password",name:"password",id:"password"}})]),r("span",{staticClass:"form-button"},[r("input",{attrs:{type:"submit",value:"登录"},on:{click:t.handleLoginButton}})]),r("span",{staticClass:"form-button"},[t._v("注册")]),r("span",{staticClass:"form-button"},[t._v("找回密码")])])])},U=[],J=r("09bb"),F={name:"login",methods:{handleLoginButton:function(){var t=this.$refs["username"].value,e=this.$refs["password"].value;console.log("login"),Object(J["a"])({username:t,password:e})}}},H=F,z=(r("3b07"),Object(p["a"])(H,q,U,!1,null,"86b3ea2a",null)),G=z.exports,Q={},W=Object(p["a"])(Q,n,i,!1,null,null,null),X=W.exports,Y=r("2f62");r.e("chunk-76e9448e").then(r.t.bind(null,"be35",7));var Z={name:"app",components:{userAvatar:g,user:D,login:G,register:X},data:function(){return{right_bar_visibility:!1,right_container_view:"",blur_bg:"url('".concat(l.a,"')"),old_cover:null,isRouterAlive:!0}},provide:function(){return{reload:this.reload}},mounted:function(){var t=this;this.$store.getters.getAudio.setAttribute("preload","auto"),this.$store.getters.getAudio.addEventListener("play",(function(){t.$store.getters.getMusicItem.cover!==t.old_cover&&t.as(t.$store.getters.getMusicItem.cover),t.old_cover=t.$store.getters.getMusicItem.cover}))},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(Y["d"])(["setSearchKeywords"])),Object(Y["b"])(["hideRightBar","hidePlayList","hideSearchView","showSearchView"])),{},{reload:function(){var t=this;this.hideSearchView(),this.$nextTick((function(){t.showSearchView()}))},handleAppClick:function(){this.hideRightBar(),this.hidePlayList()},handleSearch:function(){console.log("search"),this.setSearchKeywords(this.$refs["searchValue"].value),"browser-search"!=this.$route.name?this.$router.push({name:"browser-search"}):this.reload()},handleRightBarClick:function(){event.stopPropagation()},as:function(t){var e=this,r=document.createElement("canvas"),n=r.getContext("2d"),i=new Image;function a(t){var e,r,n,i,a,s,o,u,c,l,d=t.data,h=t.width,f=t.height,m=[],p=0,v=50,g=25;for(s=1/(Math.sqrt(2*Math.PI)*g),a=-1/(2*g*g),o=0,e=-v;e<=v;e++,o++)i=s*Math.exp(a*e*e),m[o]=i,p+=i;for(o=0,l=m.length;o<l;o++)m[o]/=p;for(r=0;r<f;r++)for(e=0;e<h;e++){for(n=i=a=s=0,p=0,u=-v;u<=v;u++)c=e+u,c>=0&&c<h&&(o=4*(r*h+c),n+=d[o]*m[u+v],i+=d[o+1]*m[u+v],a+=d[o+2]*m[u+v],p+=m[u+v]);o=4*(r*h+e),d[o]=n/p,d[o+1]=i/p,d[o+2]=a/p}for(e=0;e<h;e++)for(r=0;r<f;r++){for(n=i=a=s=0,p=0,u=-v;u<=v;u++)c=r+u,c>=0&&c<f&&(o=4*(c*h+e),n+=d[o]*m[u+v],i+=d[o+1]*m[u+v],a+=d[o+2]*m[u+v],p+=m[u+v]);o=4*(r*h+e),d[o]=n/p,d[o+1]=i/p,d[o+2]=a/p}return t}i.src=t,i.onload=function(){r.height=i.height,r.width=i.width,n.drawImage(i,0,0,i.width,i.height),i.crossOrigin="anonymous";var t=n.getImageData(0,0,i.width,i.height),s=a(t);n.putImageData(s,0,0),e.blur_bg="url(".concat(r.toDataURL("image/png"),")")}}})},tt=Z,et=(r("5c0b"),Object(p["a"])(tt,s,o,!1,null,null,null)),rt=et.exports,nt=r("8c4f"),it=[{path:"/",name:"browser",component:function(){return r.e("chunk-70ddf470").then(r.bind(null,"d86c"))},children:[{path:"/",name:"browser-home",component:function(){return r.e("chunk-735b5cf5").then(r.bind(null,"5ae2"))}},{path:"hot",name:"browser-hot",component:function(){return r.e("chunk-2d21044b").then(r.bind(null,"b6bc"))}},{path:"search",name:"browser-search",component:function(){return r.e("chunk-2bbd41e0").then(r.bind(null,"455e"))}}]},{path:"/404",name:"404",component:function(){return"<template><div>404</div></template>"}}],at=it;a["a"].use(nt["a"]);var st=new nt["a"]({routes:at}),ot=st,ut={state:{play_list_visibility:!1,right_bar_visibility:!1,search_Keywords:"",search_view_visibility:!0},getters:{getPlayListVisibility:function(t){return t.play_list_visibility},getRightBarVisibility:function(t){return t.right_bar_visibility},getSearchKeywords:function(t){return t.search_Keywords},getSearchViewVisibility:function(t){return t.search_view_visibility}},mutations:{setSearchKeywords:function(t,e){t.search_Keywords=e}},actions:{hidePlayList:function(t){var e=t.state;e.play_list_visibility=!1},showPlayList:function(t){var e=t.state;e.play_list_visibility=!0},hideRightBar:function(t){var e=t.state;e.right_bar_visibility=!1},showRightBar:function(t){var e=t.state;e.right_bar_visibility=!0},hideSearchView:function(t){var e=t.state;e.search_view_visibility=!1},showSearchView:function(t){var e=t.state;e.search_view_visibility=!0}}},ct=(r("96cf"),r("1da1")),lt="https://p1.music.126.net/",dt="http://localhost:8888/api/getMusic?musicName=",ht={state:{audio:document.createElement("audio"),Music:function(t){var e=t.id,r=t.name,n=t.source,i=t.cover,a=t.artists,s=t.album,o=t.duration,u=t.favorites;return this.id=e,this.name=r,this.source="".concat(dt).concat(n),this.cover="".concat(lt).concat(i,"?param=500y500"),this.artists=a,this.album=s,this.duration=o,this.favorites=u,this.prev=null,this.next=null,this},musicItem:{name:"",source:"",cover:"",prev:null,next:null},musicList:[],musicPlayEvent:null,playMode:"list"},getters:{getAudio:function(t){return t.audio},getMusicList:function(t){return t.musicList},getPrevMusic:function(t){return t.musicItem.prev},getNextMusic:function(t){return t.musicItem.next},getPlayMode:function(t){return t.playMode},getMusicItem:function(t){return t.musicItem}},mutations:{addMusicToList:function(t,e){t.musicList.push(e)},setMusicItem:function(t,e){t.musicItem=e,t.audio.setAttribute("src",t.musicItem.source)}},actions:{musicInit:function(t,e){var r=t.commit;return r("setMusicItem",e)},musicListInit:function(t,e){var r=t.state;e[0].prev=e[e.length-1],e[0].next=e[1];for(var n=1;n<e.length-1;n++)e[n].prev=e[n-1],e[n].next=e[n+1];return e[e.length-1].prev=e[e.length-2],e[e.length-1].next=e[0],r.musicList=e},playMusic:function(){var t=Object(ct["a"])(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.state,n=e.getters,1==n.getPlayListVisibility?setTimeout((function(){r.audio.play()}),300):r.audio.play();case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},ft={state:{name:"",avatar:"",introduce:"",logined:!1},getters:{getName:function(t){return t.name},getAvatar:function(t){return t.avatar},getIntroduce:function(t){return t.introduce},getLoginState:function(t){return t.logined}},mutations:{setName:function(t,e){t.name=e}},actions:{changeUserName:function(t,e){var r=t.commit;r("setName",e)}}};a["a"].use(Y["a"]);var mt=new Y["a"].Store({state:{},mutations:{},actions:{},modules:{app:ut,user:ft,player:ht}});a["a"].config.productionTip=!1,new a["a"]({router:ot,store:mt,render:function(t){return t(rt)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";r("9c0c")},7613:function(t,e,r){},"8a51":function(t,e,r){},"96e6":function(t,e,r){},"9c0c":function(t,e,r){},b429:function(t,e,r){},c1a8:function(t,e,r){"use strict";r("32e5")},c772:function(t,e,r){"use strict";r("b429")},cbd5:function(t,e,r){t.exports=r.p+"img/Abstract.6bf36ce8.jpg"},ebfe:function(t,e,r){"use strict";r("08c1")},f5ae:function(t,e,r){"use strict";r("96e6")}});
//# sourceMappingURL=app.ef97bef4.js.map