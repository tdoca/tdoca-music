(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-646ee8c8"],{"024a":function(t,e,i){"use strict";i("ff9c")},"42a4":function(t,e,i){"use strict";i("45c8")},"45c8":function(t,e,i){},"90a2":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"player"}},[i("div",{attrs:{id:"left-side"}},[i("div",{attrs:{id:"nav-container"}},[i("router-link",{staticClass:"nav-item",attrs:{to:{name:"songlist"}}},[t._v("歌单")]),t._v(" | "),i("router-link",{staticClass:"nav-item",attrs:{to:{name:"playlist"}}},[t._v("播放列表")]),t._v(" | "),i("router-link",{staticClass:"nav-item",attrs:{to:{name:"history"}}},[t._v("历史记录")])],1),i("div",{attrs:{id:"view-container"}},[this.$store.getters.getSearchViewVisibility?i("router-view"):t._e()],1)]),i("div",{attrs:{id:"right-side"}},[i("right-cover")],1),i("div",{attrs:{id:"bottom-side"}},[i("bottom-player")],1)])},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"bottom-player"}},[i("div",{attrs:{id:"controller-container"}},[i("i",{staticClass:"iconfont icon-kuaitui",on:{click:function(e){return t.handlePrevButtonClick()}}}),i("i",{ref:"play-button",staticClass:"iconfont icon-zanting",on:{click:function(e){return t.handlePlayButtonClick()}}}),i("i",{staticClass:"iconfont icon-kuaijin",on:{click:function(e){return t.handleNextButtonClick()}}})]),i("div",{attrs:{id:"meta-container"}},[i("div",{attrs:{id:"info-container"}},[i("span",{attrs:{id:"music-name"}},[t._v(" "+t._s(this.getPlayItem().name)+" ")]),i("span",{attrs:{id:"music-duration"}},[t._v(" "+t._s(parseInt(this.getPlayItem().duration/6e4)+":"+parseInt((this.getPlayItem().duration-6e4*parseInt(this.getPlayItem().duration/6e4))/1e3))+" ")])]),i("div",{ref:"progress-bar",attrs:{id:"progress-container"},on:{mousedown:function(e){return t.handleProgressBarMouseDown()}}},[i("div",{ref:"progress-buffer",attrs:{id:"progress-buffer"}}),i("div",{ref:"progress-current",attrs:{id:"progress-current"}}),i("div",{ref:"progress-dot",attrs:{id:"progress-dot"}})])]),i("i",{ref:"play-mode-button",staticClass:"iconfont icon-list",on:{click:function(e){return t.handlePlayModeButtonClick()}}}),i("i",{staticClass:"iconfont icon-download",on:{click:function(e){return t.handleDownloadButtonClick()}}}),i("div",{attrs:{id:"sound-container"}},[i("i",{staticClass:"iconfont icon-sound-filling"}),i("div",{ref:"volume-bar",attrs:{id:"volume-container"},on:{mousedown:function(e){return t.handleVolumeBarMouseDown()}}},[i("div",{ref:"volume-size",attrs:{id:"volume-size"}}),i("div",{ref:"volume-dot",attrs:{id:"volume-dot"}})])])])},o=[],a=i("5530"),c=i("1da1"),l=(i("96cf"),i("c91a")),u=i("09bb"),d=i("2f62"),f={name:"bottom-player",data:function(){return{musicBarMove:null}},created:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.musicListInit([new l["a"]({id:"28256124"}),new l["a"]({id:"26201979"}),new l["a"]({id:"27258185"}),new l["a"]({id:"27866687"}),new l["a"]({id:"22826405"}),new l["a"]({id:"840197"}),new l["a"]({id:"22805698"}),new l["a"]({id:"22826401"}),new l["a"]({id:"1329967179"}),new l["a"]({id:"4997987"})]);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=this;this.getAudio().addEventListener("play",Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$refs["play-button"].className="iconfont icon-bofang",null!=t.getPlayItem().lyric){e.next=4;break}return e.next=4,t.getPlayItem().lyric=Object(u["d"])({id:t.getPlayItem().id});case 4:t.addMusicToHistoryList(t.getPlayItem());case 5:case"end":return e.stop()}}),e)})))),this.getAudio().addEventListener("timeupdate",this.progressMoveHandler),this.getAudio().addEventListener("ended",(function(){switch(t.getPlayMode()){case"list":t.musicInit(t.getNextMusic()),t.playMusic();break;case"random":t.musicInit(t.getPlayList()[t.randomNum(0,t.getPlayList().length+1)]),t.playMusic();break;case"single":t.musicInit(t.getPlayItem()),t.playMusic();break}}))},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({handlePrevButtonClick:function(){switch(this.getPlayMode()){case"list":null!=this.getPrevMusic()?(this.pauseMusic(),this.musicInit(this.getPrevMusic()),this.playMusic()):this.pauseMusic();break;case"single":this.pauseMusic(),this.musicInit(this.getPlayItem()),this.playMusic();break;case"random":this.pause(),this.musicInit(this.getPlayList()[this.randomNum(0,this.getPlayList().length+1)]),this.playMusic();break}},handleNextButtonClick:function(){switch(this.getPlayMode()){case"list":null!=this.getNextMusic()?(this.pauseMusic(),this.musicInit(this.getNextMusic()),this.playMusic()):this.pauseMusic();break;case"single":this.pauseMusic(),this.musicInit(this.getPlayItem()),this.playMusic();break;case"random":this.pauseMusic(),this.musicInit(this.getPlayList()[this.randomNum(0,this.getPlayList().length+1)]),this.playMusic();break}},handlePlayButtonClick:function(){-1!==this.$refs["play-button"].className.indexOf("icon-zanting")?(this.playMusic(),this.$refs["play-button"].className="iconfont icon-bofang"):(this.pauseMusic(),this.$refs["play-button"].className="iconfont icon-zanting")},handlePlayModeButtonClick:function(){switch(this.getPlayMode()){case"list":this.setPlayMode("single"),this.$refs["play-mode-button"].className="iconfont icon-single";break;case"single":this.setPlayMode("random"),this.$refs["play-mode-button"].className="iconfont icon-random";break;case"random":this.setPlayMode("list"),this.$refs["play-mode-button"].className="iconfont icon-list";break}},handleProgressBarMouseDown:function(){this.getAudio().removeEventListener("timeupdate",this.progressMoveHandler),document.addEventListener("mousemove",this.progressValueHandler),document.addEventListener("mouseup",this.progressMouseUpHandler)},progressMouseUpHandler:function(){document.removeEventListener("mousemove",this.progressValueHandler),this.getAudio().currentTime=this.getAudio().duration*this.progressValueHandler(),this.getAudio().addEventListener("timeupdate",this.progressMoveHandler),document.removeEventListener("mouseup",this.progressMouseUpHandler)},progressValueHandler:function(){var t=this.$refs["progress-bar"].offsetLeft+document.querySelector("#main").offsetLeft;return window.event.clientX-t<0?(this.$refs["progress-current"].style.width="0%",this.$refs["progress-dot"].style.marginLeft="0%",0):window.event.clientX>t+this.$refs["progress-bar"].offsetWidth?(this.$refs["progress-current"].style.width="100%",this.$refs["progress-dot"].style.marginLeft="100%",1):(this.$refs["progress-current"].style.width=(window.event.clientX-t)/this.$refs["progress-bar"].offsetWidth*100+"%",this.$refs["progress-dot"].style.marginLeft=(window.event.clientX-t)/this.$refs["progress-bar"].offsetWidth*100+"%",(window.event.clientX-t)/this.$refs["progress-bar"].offsetWidth)},progressMoveHandler:function(){0!=this.getAudio().currentTime&&(this.$refs["progress-buffer"].style.width=this.getAudio().buffered.end(this.getAudio().buffered.length-1)/this.getAudio().duration*100+"%",this.$refs["progress-current"].style.width=this.getAudio().currentTime/this.getAudio().duration*100+"%",this.$refs["progress-dot"].style.marginLeft=this.getAudio().currentTime/this.getAudio().duration*100+"%")},handleVolumeBarMouseDown:function(){document.addEventListener("mousemove",this.volumeValueHandler),document.addEventListener("mouseup",this.volumeMouseUpHandler)},volumeValueHandler:function(){console.log(this.$refs["volume-bar"].offsetLeft);var t=this.$refs["volume-bar"].offsetLeft+document.querySelector("#main").offsetLeft;return window.event.clientX-t<0?(this.$refs["volume-size"].style.width="0%",this.$refs["volume-dot"].style.marginLeft="0%",0):window.event.clientX>t+this.$refs["volume-bar"].offsetWidth?(this.$refs["volume-size"].style.width="100%",this.$refs["volume-dot"].style.marginLeft="100%",1):(this.$refs["volume-size"].style.width=(window.event.clientX-t)/this.$refs["volume-bar"].offsetWidth*100+"%",this.$refs["volume-dot"].style.marginLeft=(window.event.clientX-t)/this.$refs["volume-bar"].offsetWidth*100+"%",(window.event.clientX-t)/this.$refs["volume-bar"].offsetWidth)},volumeMouseUpHandler:function(){document.removeEventListener("mousemove",this.volumeValueHandler),this.getAudio().volume=1*this.volumeValueHandler(),document.removeEventListener("mouseup",this.volumeMouseUpHandler)},randomNum:function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1,10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}},handleDownloadButtonClick:function(){}},Object(d["b"])(["musicListInit","musicInit","playMusic","pauseMusic","addMusicToHistoryList"])),Object(d["c"])(["getPlayList","getPlayItem","getAudio","getPlayMode","getNextMusic","getPrevMusic"])),Object(d["d"])(["setPlayMode"]))},h=f,m=(i("42a4"),i("2877")),g=Object(m["a"])(h,r,o,!1,null,"29d9c0ab",null),v=g.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"right-cover"}},[i("div",{attrs:{id:"cover-container"}},[i("img",{attrs:{src:this.$store.getters.getPlayItem.cover,alt:"music cover"}})]),i("div",{attrs:{id:"lyric-container"}},[i("lyric-list",{attrs:{lyricList:this.$store.getters.getPlayItem.lyric}})],1)])},y=[],b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"lyric-list",attrs:{id:"lyric-list"}},t._l(t.lyricList,(function(e){return i("span",{key:t.lyricList.indexOf(e),ref:"lyric-item",refInFor:!0,staticClass:"lyric-item"},[t._v(" "+t._s(e.lrc)+" ")])})),0)},w=[],M=(i("159b"),{name:"lyric-list",props:{lyricList:{type:Array}},mounted:function(){var t=this;this.getAudio().addEventListener("timeupdate",(function(){var e=t.lyricList,i=t.getAudio().currentTime;if(null!=t.$refs["lyric-item"]){t.$refs["lyric-item"].forEach((function(t){t.style.fontSize="14px",t.style.color="#e1e1e1cc"}));var s=e.length;while(s--)if(i>=e[s].dt){t.$refs["lyric-item"][s].style.fontSize="18px",t.$refs["lyric-item"][s].style.color="#fff";break}s=e.length;while(s--){if(i>=e[s].dt&&s>=3){for(var n=0,r=0;r<s-2;r++)n+=t.$refs["lyric-item"][r].offsetHeight;t.$refs["lyric-list"].style.marginTop="-"+n+"px";break}i<e[3].dt&&(t.$refs["lyric-list"].style.marginTop="0px")}}}))},methods:Object(a["a"])({},Object(d["c"])(["getAudio"]))}),$=M,L=(i("deb3"),Object(m["a"])($,b,w,!1,null,"76b7dcc5",null)),P=L.exports,k={name:"right-cover",mounted:function(){console.log(this.$store.getters.getPlayItem)},components:{lyricList:P}},I=k,x=(i("944a"),Object(m["a"])(I,p,y,!1,null,"4cc7a452",null)),A=x.exports,C={name:"player",components:{bottomPlayer:v,rightCover:A}},H=C,_=(i("024a"),Object(m["a"])(H,s,n,!1,null,"b69fb52e",null));e["default"]=_.exports},"944a":function(t,e,i){"use strict";i("d685")},d685:function(t,e,i){},deb3:function(t,e,i){"use strict";i("e5f1")},e5f1:function(t,e,i){},ff9c:function(t,e,i){}}]);
//# sourceMappingURL=chunk-646ee8c8.f526cb3c.js.map