(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-493aac8e"],{"04f5":function(t,e,i){"use strict";i("148e")},"148e":function(t,e,i){},3293:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"music-list"}},[t.category?i("div",{attrs:{id:"list-category-container"}},[i("div",{attrs:{id:"category-number"}},[t._v("序号")]),i("div",{attrs:{id:"category-name"}},[t._v("音乐名称")]),i("div",{attrs:{id:"category-artists"}},[t._v("歌手")]),i("div",{attrs:{id:"category-album"}},[t._v("专辑")]),i("div",{attrs:{id:"category-duration"}},[t._v("时长")])]):t._e(),i("div",{style:t.scroll?{overflow:"overlay"}:{overflow:"hidden"},attrs:{id:"music-item-container"}},t._l(t.musicList,(function(e){return i("div",{key:t.musicList.indexOf(e),staticClass:"music-item",class:t.musicList.indexOf(e)%2===0?"even":"odd",on:{mousemove:function(i){t.handleMusicItemMouseMove(t.musicList.indexOf(e))},mouseout:function(i){t.handleMusicItemMouseOut(t.musicList.indexOf(e))}}},[i("div",{staticClass:"music-item-number"},[t._v(t._s(t.musicList.indexOf(e)))]),i("div",{staticClass:"music-item-name"},[i("span",{ref:"name",refInFor:!0},[t._v(t._s(e.name))]),i("div",{ref:"control",refInFor:!0,staticStyle:{display:"none"}},[i("i",{staticClass:"iconfont icon-play",on:{click:function(i){return t.handlePlayButtonClick(e)}}}),i("i",{staticClass:"iconfont icon-add",on:{click:function(i){return t.handleAddButtonClick(e,i)}}}),i("i",{staticClass:"iconfont icon-download",on:{click:function(i){return t.handleDownloadButtonClick(e)}}})])]),i("div",{staticClass:"music-item-artists"},[i("router-link",{attrs:{to:"browser-search/"+(e.artists.name||e.artists[0].name)}},[t._v(t._s(e.artists.name||e.artists[0].name))])],1),i("div",{staticClass:"music-item-album"},[i("router-link",{attrs:{to:"browser-search/"+e.album.name}},[t._v(t._s(e.album.name))])],1),i("div",{staticClass:"music-item-duration"},[i("div",{ref:"duration",refInFor:!0},[t._v(" "+t._s(parseInt(e.duration/6e4)+":"+parseInt((e.duration-6e4*parseInt(e.duration/6e4))/1e3))+" ")]),"playList"==t.listView||"history"==t.listView?i("div",{ref:"remove",refInFor:!0,staticStyle:{display:"none"},on:{click:function(i){return t.handleRemoveButtonClick(e)}}},[i("i",{staticClass:"iconfont icon-ashbin"})]):t._e()])])})),0),i("transition",{attrs:{name:"menu_visibility"}},[i("ul",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.app.menu_visibility,expression:"this.$store.state.app.menu_visibility"}],ref:"song_sheet_menu",attrs:{id:"song_sheet_menu"}},[t._l(this.$store.getters.getSongSheetList,(function(e){return i("li",{key:e.sid,on:{click:function(i){return t.handleSongSheetItemClick(e)}}},[t._v(" "+t._s(e.title)+" ")])})),0==this.$store.getters.getLoginStatus?i("span",[t._v(" 登录后添加到歌单 ")]):t._e()],2)])],1)},n=[],a=i("1da1"),r=i("5530"),c=(i("b0c0"),i("d3b7"),i("25f0"),i("96cf"),i("09bb")),o=i("2f62"),u={name:"music-list",data:function(){return{menu_view:"play_list",music_id:""}},props:{musicList:{type:Array,default:null,required:!0},scroll:{type:Boolean,default:!1,required:!1},category:{type:Boolean,default:!1,required:!1},listView:{type:String,required:!0}},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({handlePlayButtonClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.id),i=this.getPlayList(),s=i.length-1;case 3:if(i[s].id!=e.id){t.next=8;break}return t.next=6,this.musicInit(i[s]);case 6:return this.playMusic(),t.abrupt("return");case 8:console.log(s);case 9:if(s--){t.next=3;break}case 10:return t.t0=this,t.next=13,this.musicInit(e);case 13:t.t1=t.sent,t.t0.addMusicToPlayList.call(t.t0,t.t1),this.playMusic();case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleMusicItemMouseMove:function(t){switch(this.listView){case"playList":case"history":this.$refs.name[t].style.display="none",this.$refs.control[t].style.display="block",this.$refs.duration[t].style.display="none",this.$refs.remove[t].style.display="inline";break;case"musicList":this.$refs.name[t].style.display="none",this.$refs.control[t].style.display="block"}},handleMusicItemMouseOut:function(t){switch(this.listView){case"playList":case"history":this.$refs.name[t].style.display="block",this.$refs.control[t].style.display="none",this.$refs.duration[t].style.display="inline",this.$refs.remove[t].style.display="none";break;case"musicList":this.$refs.name[t].style.display="block",this.$refs.control[t].style.display="none"}},handleAddButtonClick:function(t,e){this.music_id=t.id,e.stopPropagation(),this.$store.state.app.menu_visibility=!0;var i=this.$refs["song_sheet_menu"];i.style.top=e.clientY+"px",i.style.left="170px",e.clientY>=450&&(i.style.top=e.clientY-200+"px",i.style.left="170px")},handleSongSheetItemClick:function(t){var e=this;-1==t.songs.indexOf(this.music_id.toString())?Object(c["b"])({sid:t.sid,mid:this.music_id}).then((function(){alert("添加成功"),Object(c["i"])({uid:e.getUid()}).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateSongSheetList(i.data);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})):alert("此歌单已存在这首歌")},handleRemoveButtonClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=this.listView,t.next="playList"===t.t0?3:"history"===t.t0?5:7;break;case 3:return this.removeMusicOfList(this.musicList.indexOf(e)),t.abrupt("break",7);case 5:return this.removeMusicOfHistoryList(e),t.abrupt("break",7);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleDownloadButtonClick:function(t){console.log(t)}},Object(o["d"])(["removeMusicOfList","updateSongSheetList"])),Object(o["b"])(["musicInit","playMusic","addMusicToPlayList","removeMusicOfHistoryList"])),Object(o["c"])(["getNextMusic","getPlayList","getPlayItem","getUid"]))},l=u,d=(i("e932"),i("2877")),h=Object(d["a"])(l,s,n,!1,null,"fbcb6330",null);e["a"]=h.exports},"44cb":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"search"}},[i("div",{attrs:{id:"result-container"}},[i("music-list",{attrs:{"music-list":this.music_list,listView:"musicList",scroll:!0,category:!0}})],1),i("div",{attrs:{id:"pages-container"}},[1!=t.getSearchPage()?i("div",{on:{click:function(e){return t.handlePageButtonClick(0)}}},[t._v("1")]):t._e(),1!=t.getSearchPage()?i("div",{on:{click:function(e){t.handlePageButtonClick(30*(t.getSearchPage()-1))}}},[t._v("上一页")]):t._e(),i("div",{on:{click:function(e){t.handlePageButtonClick(30*t.getSearchPage())}}},[t._v(t._s(t.getSearchPage()))]),t.getSearchPage()!=t.max_page?i("div",{on:{click:function(e){t.handlePageButtonClick(30*(t.getSearchPage()+1))}}},[t._v("下一页")]):t._e(),t.getSearchPage()!=t.max_page?i("div",{on:{click:function(e){return t.handlePageButtonClick(30*t.max_page)}}},[t._v(t._s(this.max_page))]):t._e()])])},n=[],a=i("5530"),r=(i("b0c0"),i("09bb")),c=i("c91a"),o=i("3293"),u=i("2f62"),l={name:"player-search",data:function(){return{music_list:[],song_count:null,max_page:0}},components:{musicList:o["a"]},created:function(){var t=this;console.log(this.$store.getters.getSearchKeywords),""!=this.$store.getters.getSearchKeywords&&Object(r["k"])({keywords:this.$store.getters.getSearchKeywords,offset:0}).then((function(e){var i=e.data.body.result.songs;t.song_count=e.data.body.result.songCount,t.setSearchPage(1),0!=parseFloat(30&t.song_count)&&(t.max_page=parseInt(t.song_count/30)+1);for(var s=new Array,n=0,a=i.length;n<a;n++)s.push(new c["a"]({id:i[n].id,name:i[n].name,duration:i[n].duration,album:i[n].album,artists:i[n].artists}));t.music_list=s}))},methods:Object(a["a"])(Object(a["a"])({handlePageButtonClick:function(t){var e=this;Object(r["k"])({keywords:this.$store.getters.getSearchKeywords,offset:t}).then((function(i){var s=i.data.body.result.songs;console.log(t),t<e.max_page?(console.log("max"),e.setSearchPage(t)):e.setSearchPage(e.max_page);for(var n=new Array,a=0,r=s.length;a<r;a++)n.push(new c["a"]({id:s[a].id,name:s[a].name,duration:s[a].duration,album:s[a].album,artists:s[a].artists}));e.music_list=n}))}},Object(u["c"])(["getSearchPage"])),Object(u["d"])(["setSearchPage"]))},d=l,h=(i("04f5"),i("2877")),m=Object(h["a"])(d,s,n,!1,null,"5b2f1860",null);e["default"]=m.exports},"7fbd":function(t,e,i){},e932:function(t,e,i){"use strict";i("7fbd")}}]);
//# sourceMappingURL=chunk-493aac8e.46cb2444.js.map